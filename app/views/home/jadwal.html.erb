
<%
ucapan_list = [
  "Semoga harimu menyenangkan dan penuh semangat mengajar!",
  "Jangan lupa tersenyum dan semangat mengajar hari ini!",
  "Hari yang indah untuk berbagi ilmu!",
  "Tetap semangat, guru hebat!",
  "Semoga hari ini penuh inspirasi untuk siswa-siswamu!",
  "Ayo wujudkan pembelajaran yang seru hari ini!"
]
ucapan_random = ucapan_list.sample
%>

<%# Ucapan selamat datang %>
<div class="mt-24 mb-6 px-4">
  <div class="bg-gradient-to-r border-l-4 border-blue-500 text-blue-700 p-4 rounded shadow">
    <p class="text-lg font-semibold">
      Selamat datang, <%= current_user.teacher&.nama&.downcase&.titleize || current_user.email %> ðŸ‘‹
    </p>
    <p class="text-xs md:text-sm text-gray-700"><%= ucapan_random %></p>
  </div>
</div>

<%# Jadwal Hari Ini %>
<h2 class="text-lg font-semibold mt-5 mb-4 px-4">
  Jadwal Mengajar Anda Hari Ini 
</h2>

<% if @todays_schedule.any? %>
  <h3 class="font-semibold text-md mb-2 px-4 text-slate-700"><%= @today_in_indonesian %></h3>
  <div class="mb-8 overflow-auto rounded-lg shadow mx-4 bg-white">
    <table class="w-full text-sm text-gray-700 border-collapse">
      <thead>
        <tr class="bg-white text-slate-700 text-center uppercase text-xs md:text-sm">
          <th class="p-3 border-b">No</th>
          <th class="p-3 border-b">Jam</th>
          <th class="p-3 border-b">Kelas</th>
          <th class="p-3 border-b">Mata Pelajaran</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <% @todays_schedule.each_with_index do |schedule, i| %>
          <tr class="hover:bg-blue-50 text-center">
            <td class="p-3"><%= i + 1 %></td>
            <td class="p-3 whitespace-nowrap"><%= schedule.time_text %></td>
            <td class="p-3"><%= schedule.class_room_name %></td>
            <td class="p-3"><%= schedule.subject_name %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <div class="mb-8 text-center text-gray-500 italic px-4">
    Tidak ada jadwal mengajar hari ini.
  </div>
<% end %>


<h2 class="text-lg font-semibold mb-4 px-4">Jadwal Lengkap</h2>

<% days_order = %w[Senin Selasa Rabu Kamis Jumat Sabtu] %>

<div class="grid gap-x-4 gap-y-6 px-4">
  <% days_order.each_slice(2) do |day_pair| %>
    <% day_pair.each do |day| %>
      <% schedules = @schedules_by_day[day] %>
      <% if schedules.present? %>
        <div class="mb-4 bg-white rounded-lg shadow">
          <h3 class="font-semibold text-sm md:text-md mb-2 pt-4 px-4 text-slate-700"><%= day %></h3>
          <div class="overflow-auto">
            <table class="w-full text-sm text-gray-700 border-collapse">
              <thead>
                <tr class="bg-white text-slate-700 text-center uppercase text-xs md:text-sm">
                  <th class="p-3 border-b">No</th>
                  <th class="p-3 border-b">Jam</th>
                  <th class="p-3 border-b">Kelas</th>
                  <th class="p-3 border-b">Mata Pelajaran</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-200">
                <% schedules.each_with_index do |schedule, i| %>
                  <tr class="hover:bg-blue-50 text-center">
                    <td class="p-3"><%= i + 1 %></td>
                    <td class="p-3 whitespace-nowrap"><%= schedule.time_text %></td>
                    <td class="p-3"><%= schedule.class_room_name %></td>
                    <td class="p-3"><%= schedule.subject_name %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>